{"ast":null,"code":"var _jsxFileName = \"/Users/edisoncardenas/Downloads/repo/outletify-client/outletify-client/src/pages/ItemDetailsPage.js\",\n    _s = $RefreshSig$();\n\nimport { useState, useEffect, useContext } from \"react\";\nimport { useParams, Link, useNavigate } from \"react-router-dom\";\nimport axios from \"axios\";\nimport StripeCheckout from \"react-stripe-checkout\";\nimport { AuthContext } from \"../context/auth.context\";\nimport Swal from \"sweetalert2\";\nimport withReactContent from \"sweetalert2-react-content\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API_URL = \"https://codebooks.fly.dev\";\n\nfunction ItemDetailsPage(props) {\n  _s();\n\n  const Navigate = useNavigate();\n  const {\n    isLoggedIn,\n    user,\n    logOutUser\n  } = useContext(AuthContext);\n  const [item, setItem] = useState(null);\n  const [orderedItem, setOrderedItem] = useState([]);\n  const {\n    itemId\n  } = useParams();\n  const key = \"pk_test_51M9ZjvG6NeaDtKpVRFtUgmoFVxEMaTjHtPct35DcaB1DLIyvoEqXQ6vAvcgqKcp7cfjeIs5J0ZH94EhjCsSyWN7Z00xeCRkTs7\";\n\n  const getItem = () => {\n    const storedToken = localStorage.getItem(\"authToken\");\n    axios.get(`${API_URL}/auth/items/${itemId}`, {\n      headers: {\n        Authorization: `Bearer ${storedToken}`\n      }\n    }).then(response => {\n      const oneItem = response.data;\n      setItem(oneItem);\n    }).catch(error => console.log(error));\n  };\n\n  useEffect(() => {\n    getItem();\n  }, []);\n  const MySwal = withReactContent(Swal);\n\n  const handleAddToCart = () => {\n    const requestBody = {\n      itemId\n    };\n    const storedToken = localStorage.getItem(\"authToken\");\n    axios.post(`${API_URL}/auth/order/${itemId}`, requestBody, {\n      headers: {\n        Authorization: `Bearer ${storedToken}`\n      }\n    }).then(response => {\n      console.log(response.data.cart);\n    });\n    Navigate(`/user/${user._id}`);\n  };\n\n  const handleSuccess = () => {\n    MySwal.fire({\n      icon: \"success\",\n      title: \"Payment was succesful\",\n      time: 1000\n    });\n  };\n\n  const payNow = async token => {\n    try {\n      const response = await axios({\n        url: \"https://codebooks.fly.dev/auth/payment\",\n        method: \"post\",\n        data: {\n          amount: item.price * 100,\n          token\n        }\n      });\n\n      if (response.status === 200) {\n        handleSuccess();\n      }\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  const priceForStripe = (item === null || item === void 0 ? void 0 : item.price) * 100;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"item-detail-container\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"item-detail\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: item === null || item === void 0 ? void 0 : item.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n          src: item === null || item === void 0 ? void 0 : item.img,\n          alt: \"pic\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: `$${item === null || item === void 0 ? void 0 : item.price}`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 11\n        }, this), !isLoggedIn && /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/login\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            children: \"Buy Now\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 13\n        }, this), isLoggedIn && /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleAddToCart,\n          children: \"Add to cart\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 26\n        }, this), isLoggedIn && /*#__PURE__*/_jsxDEV(StripeCheckout, {\n          stripeKey: key,\n          label: \"Pay Now\",\n          billingAddress: true,\n          shippingAddress: true,\n          amount: priceForStripe,\n          description: `your total is $${item === null || item === void 0 ? void 0 : item.price}`,\n          token: payNow\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"description-container\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"description\",\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 80,\n    columnNumber: 5\n  }, this);\n}\n\n_s(ItemDetailsPage, \"q8VCgYH+NGQqe4sOGhtmmfbiWKE=\", false, function () {\n  return [useNavigate, useParams];\n});\n\n_c = ItemDetailsPage;\nexport default ItemDetailsPage;\n\nvar _c;\n\n$RefreshReg$(_c, \"ItemDetailsPage\");","map":{"version":3,"names":["useState","useEffect","useContext","useParams","Link","useNavigate","axios","StripeCheckout","AuthContext","Swal","withReactContent","API_URL","ItemDetailsPage","props","Navigate","isLoggedIn","user","logOutUser","item","setItem","orderedItem","setOrderedItem","itemId","key","getItem","storedToken","localStorage","get","headers","Authorization","then","response","oneItem","data","catch","error","console","log","MySwal","handleAddToCart","requestBody","post","cart","_id","handleSuccess","fire","icon","title","time","payNow","token","url","method","amount","price","status","priceForStripe","name","img"],"sources":["/Users/edisoncardenas/Downloads/repo/outletify-client/outletify-client/src/pages/ItemDetailsPage.js"],"sourcesContent":["import { useState, useEffect, useContext } from \"react\";\nimport { useParams, Link, useNavigate } from \"react-router-dom\";\nimport axios from \"axios\";\nimport StripeCheckout from \"react-stripe-checkout\";\nimport { AuthContext } from \"../context/auth.context\";\nimport Swal from \"sweetalert2\";\nimport withReactContent from \"sweetalert2-react-content\";\n\nconst API_URL = \"https://codebooks.fly.dev\";\n\nfunction ItemDetailsPage(props) {\n  const Navigate = useNavigate();\n  const { isLoggedIn, user, logOutUser } = useContext(AuthContext);\n  const [item, setItem] = useState(null);\n  const [orderedItem, setOrderedItem] = useState([]);\n  const { itemId } = useParams();\n  const key =\n    \"pk_test_51M9ZjvG6NeaDtKpVRFtUgmoFVxEMaTjHtPct35DcaB1DLIyvoEqXQ6vAvcgqKcp7cfjeIs5J0ZH94EhjCsSyWN7Z00xeCRkTs7\";\n\n  const getItem = () => {\n    const storedToken = localStorage.getItem(\"authToken\");\n    axios\n      .get(`${API_URL}/auth/items/${itemId}`, {\n        headers: { Authorization: `Bearer ${storedToken}` },\n      })\n      .then((response) => {\n        const oneItem = response.data;\n        setItem(oneItem);\n      })\n      .catch((error) => console.log(error));\n  };\n\n  useEffect(() => {\n    getItem();\n  }, []);\n\n  const MySwal = withReactContent(Swal);\n\n  const handleAddToCart = () => {\n    const requestBody = { itemId };\n    const storedToken = localStorage.getItem(\"authToken\");\n    axios\n      .post(`${API_URL}/auth/order/${itemId}`, requestBody, {\n        headers: { Authorization: `Bearer ${storedToken}` },\n      })\n      .then((response) => {\n        console.log(response.data.cart);\n      });\n    Navigate(`/user/${user._id}`);\n  };\n\n  const handleSuccess = () => {\n    MySwal.fire({\n      icon: \"success\",\n      title: \"Payment was succesful\",\n      time: 1000,\n    });\n  };\n\n  const payNow = async (token) => {\n    try {\n      const response = await axios({\n        url: \"https://codebooks.fly.dev/auth/payment\",\n        method: \"post\",\n        data: {\n          amount: item.price * 100,\n          token,\n        },\n      });\n      if (response.status === 200) {\n        handleSuccess();\n      }\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  const priceForStripe = item?.price * 100;\n  return (\n    <div className=\"item-detail-container\">\n      <div className=\"item-detail\">\n        <div>\n          <p>{item?.name}</p>\n          <br></br>\n\n          <img src={item?.img} alt=\"pic\" />\n          <p>{`$${item?.price}`}</p>\n          <br></br>\n          {!isLoggedIn && (\n            <Link to=\"/login\">\n              <button>Buy Now</button>\n            </Link>\n          )}\n\n          {isLoggedIn && <button onClick={handleAddToCart}>Add to cart</button>}\n          {isLoggedIn && (\n            <StripeCheckout\n              stripeKey={key}\n              label=\"Pay Now\"\n              billingAddress\n              shippingAddress\n              amount={priceForStripe}\n              description={`your total is $${item?.price}`}\n              token={payNow}\n            />\n          )}\n        </div>\n        <div className=\"description-container\">\n          <div className=\"description\">\n            <p>\n              Lorem Ipsum is simply dummy text of the printing and typesetting\n              industry. Lorem Ipsum has been the industry's standard dummy text\n              ever since the 1500s, when an unknown printer took a galley of\n              type and scrambled it to make a type specimen book. It has\n              survived not only five centuries, but also the leap into\n              electronic typesetting, remaining essentially unchanged. It was\n              popularised in the 1960s with the release of Letraset sheets\n            </p>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default ItemDetailsPage;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}